<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" template="/ui/template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://myfaces.apache.org/sandbox">


	<ui:define name="breadcrumb">
		<h:commandLink id="id2" value="#{msgs.startseite}" action="index" />
		<f:verbatim> &#8250;&#8250; </f:verbatim>
		<h:commandLink id="id3" value="#{msgs.benutzerverwaltung}" action="#{BenutzerverwaltungForm.paginator.returnToPreviousPage}" />
		<f:verbatim> &#8250;&#8250; </f:verbatim>
		<h:outputText id="id4" value="#{msgs.neuenBenutzerAnlegen}" rendered="#{BenutzerverwaltungForm.myClass.id == null}" />
		<h:outputText id="id5" value="#{msgs.benutzerBearbeiten}" rendered="#{BenutzerverwaltungForm.myClass.id != null}" />
	</ui:define>

	<ui:define name="title">
		<h:outputText id="id6" value="#{msgs.neuenBenutzerAnlegen}" rendered="#{BenutzerverwaltungForm.myClass.id == null}" />
		<h:outputText id="id7" value="#{msgs.benutzerBearbeiten}" rendered="#{BenutzerverwaltungForm.myClass.id != null}" />
	</ui:define>

	<ui:define name="content">

		<h:form id="myform" rendered="#{LoginForm.maximaleBerechtigung == 1}" onkeypress="ifEnterClick(event, 'myform:absenden');">

			<!-- Box für die Bearbeitung der Details -->
			<table cellpadding="3" cellspacing="0" width="100%" class="eingabeBoxen">

				<tr>
					<td class="eingabeBoxen_row1" align="left">
						<h:outputText id="id9" value="#{msgs.details}" />
					</td>
					<td class="eingabeBoxen_row1" align="right">
						<h:commandLink id="id10" action="#{NavigationForm.Reload}">
							<h:graphicImage id="id11" value="images/reload.gif" />
						</h:commandLink>
					</td>
				</tr>

				<!-- Formular für die Bearbeitung der Texte -->
				<tr>
					<td class="eingabeBoxen_row2" colspan="2">
						<h:panelGrid id="id12" columns="2" rowClasses="top">

							<!-- nachname -->
							<h:outputLabel id="id13" for="nachname" value="#{msgs.nachname}" />
							<h:panelGroup id="id14">
								<h:inputText id="nachname" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.nachname}" required="true" />
								<x:message id="id15" for="nachname" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- vorname -->
							<h:outputLabel id="id16" for="vorname" value="#{msgs.vorname}" />
							<h:panelGroup id="id17">
								<h:inputText id="vorname" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.vorname}" required="true" />
								<x:message id="id18" for="vorname" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- standort -->
							<h:outputLabel id="id19" for="standort" value="#{msgs.standort}" />
							<h:panelGroup id="id20">
								<h:inputText id="standort" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.standort}" required="true" />
								<x:message id="id21" for="standort" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- login -->
							<h:outputLabel id="id22" for="login" value="#{msgs.login}" />
							<h:panelGroup id="id23">
								<h:inputText id="login" readonly="#{BenutzerverwaltungForm.myClass.id != null}" style="width: 300px;margin-right:15px"
									value="#{BenutzerverwaltungForm.myClass.login}" required="true" />
								<x:message id="id24" for="login" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- login -->
							<h:outputLabel id="id22a" for="ldaplogin" value="#{msgs.ldaplogin}" />
							<h:panelGroup id="id23a">
								<h:inputText id="ldaplogin" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.ldaplogin}" required="true" />
								<x:message id="id24a" for="ldaplogin" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- passwort -->
							<h:outputLabel id="id25" for="passwort" value="#{msgs.passwort}" />
							<h:panelGroup id="id26">
								<h:inputSecret redisplay="true" id="passwort" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.passwortCrypt}"
									required="true" />
								<x:message id="id27" for="passwort" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- LdapGruppe -->
							<h:outputLabel id="id28" for="ldapGruppe" value="#{msgs.ldapgruppe}" />
							<h:panelGroup id="id29">
								<h:selectOneMenu id="ldapGruppe" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.ldapGruppeAuswahl}" required="true">
									<f:selectItem id="id30" itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
									<f:selectItems value="#{BenutzerverwaltungForm.ldapGruppeAuswahlListe}" />
								</h:selectOneMenu>
								<x:message id="id31" for="ldapGruppe" style="color: red" detailFormat="#{msgs.keineLdapgruppeAngegeben}" />
								<!-- ldap configuration schreiben -->
								<h:commandLink id="id32" title="#{msgs.ldapKonfigurationSchreiben}" action="#{BenutzerverwaltungForm.LdapKonfigurationSchreiben}"
									rendered="#{BenutzerverwaltungForm.myClass.id != null and HelperForm.ldapIsWritable}">
									<h:graphicImage id="id33" value="images/buttons/key3.gif" />
									<x:updateActionListener property="#{BenutzerverwaltungForm.myClass}" value="#{BenutzerverwaltungForm.myClass}" />
								</h:commandLink>
							</h:panelGroup>
							<!-- MetadatenSprache -->
							<h:outputLabel id="id34" for="metadatenSprache" value="#{msgs.spracheFuerMetadaten}" />
							<h:panelGroup id="id35">
								<h:inputText id="metadatenSprache" style="width: 300px;margin-right:15px" value="#{BenutzerverwaltungForm.myClass.metadatenSprache}"
									required="true" />
								<x:message id="id36" for="metadatenSprache" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- ist aktiv -->
							<h:outputLabel id="id37" for="istAktiv" value="#{msgs.istAktiv}" />
							<h:panelGroup id="id38">
								<h:selectBooleanCheckbox id="istAktiv" style="margin-right:15px" value="#{BenutzerverwaltungForm.myClass.istAktiv}" />
								<x:message id="id39" for="istAktiv" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- mit Massendownload -->
							<h:outputLabel id="id40" for="mitMassendownload" value="#{msgs.massendownload}" />
							<h:panelGroup id="id41">
								<h:selectBooleanCheckbox id="mitMassendownload" style="margin-right:15px" value="#{BenutzerverwaltungForm.myClass.mitMassendownload}" />
								<x:message id="id42" for="mitMassendownload" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>

							<!-- ===================== User groups ====================== -->

							<h:commandLink action="#{BenutzergruppenForm.FilterKeinMitZurueck}" style="border-bottom: #a24033 dashed 1px;" value="#{msgs.benutzergruppen}">
								<f:setPropertyActionListener target="#{BenutzerverwaltungForm.displayMode}" value="#{BenutzerverwaltungForm.displayMode eq ''?'usergroup':''}" />
							</h:commandLink>

							<h:panelGroup>
								<h:panelGroup rendered="#{BenutzerverwaltungForm.displayMode eq 'usergroup'}">

									<x:dataTable styleClass="standardTable" width="100%" cellspacing="1px" cellpadding="1px" headerClass="standardTable_Header"
										rowClasses="standardTable_Row1,standardTable_Row2" columnClasses="standardTable_Column,standardTable_ColumnCentered" var="item"
										value="#{BenutzergruppenForm.paginator.list}">

										<h:column id="id9">
											<f:facet name="header">
												<h:outputText id="id10" value="#{msgs.benutzergruppe}" />
											</f:facet>
											<h:outputText id="id11" value="#{item.titel}" />
										</h:column>

										<h:column id="id12">
											<f:facet name="header">
												<h:outputText id="id13" value="#{msgs.auswahl}" />
											</f:facet>
											<!-- Hinzufügen-Schaltknopf -->
											<h:commandLink action="#{BenutzerverwaltungForm.ZuGruppeHinzufuegen}" title="#{msgs.uebernehmen}">
												<h:graphicImage id="id14" value="images/buttons/addUser.gif" />
												<f:param id="id15" name="ID" value="#{item.id}" />
											</h:commandLink>

										</h:column>

									</x:dataTable>

									<table width="100%" border="0">
										<tr valign="top">
											<td align="left">
												<!-- Abbrechen-Schaltknopf -->
												<h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.abbrechen}">
													<f:setPropertyActionListener target="#{BenutzerverwaltungForm.displayMode}" value="" />
												</h:commandLink>
											</td>

											<td align="center">
												<!-- ===================== Datascroller für die Ergebnisse ====================== -->
												<x:aliasBean alias="#{mypage}" value="#{BenutzergruppenForm.paginator}">
													<ui:include src="includes/datascroller2.xhtml" />
												</x:aliasBean>
												<!-- ===================== // Datascroller für die Ergebnisse ====================== -->
											</td>
										</tr>
									</table>
								</h:panelGroup>

								<x:dataTable id="id45" width="300" columnClasses="standardTable_Column,standardTable_Column,standardTable_ColumnCentered" var="item"
									rendered="#{BenutzerverwaltungForm.displayMode ne 'usergroup'}" value="#{BenutzerverwaltungForm.myClass.benutzergruppen}">
									<h:column id="id46">
										<h:outputText id="id47" value="#{item.titel}" />
									</h:column>
									<h:column id="id48">
										<!-- Löschen-Schaltknopf -->
										<h:commandLink action="#{BenutzerverwaltungForm.AusGruppeLoeschen}" title="#{msgs.ausGruppeLoeschen}">
											<h:graphicImage id="id49" value="images/buttons/waste1a_20px.gif" />
											<f:param id="id50" name="ID" value="#{item.id}" />
										</h:commandLink>
									</h:column>
								</x:dataTable>

							</h:panelGroup>


							<!-- ===================== Projects ====================== -->

							<h:commandLink action="#{ProjekteForm.FilterKeinMitZurueck}" style="border-bottom: #a24033 dashed 1px;" value="#{msgs.projekte}">
								<f:setPropertyActionListener target="#{BenutzerverwaltungForm.displayMode}" value="#{BenutzerverwaltungForm.displayMode eq ''?'project':''}" />
							</h:commandLink>

							<h:panelGroup>
								<h:panelGroup id="projects" rendered="#{BenutzerverwaltungForm.displayMode eq 'project'}">

									<table style="margin-top: 20px" align="center" width="90%" border="0">
										<tr>
											<td>
												<x:dataTable id="id8" styleClass="standardTable" width="100%" cellspacing="1px" cellpadding="1px" headerClass="standardTable_Header"
													rowClasses="standardTable_Row1,standardTable_Row2" columnClasses="standardTable_Column,standardTable_ColumnCentered" var="item"
													value="#{ProjekteForm.paginator.list}">

													<h:column id="id9">
														<f:facet name="header">
															<h:outputText id="id10" value="#{msgs.projekt}" />
														</f:facet>
														<h:outputText id="id11" value="#{item.titel}" />
													</h:column>

													<h:column id="id12">
														<f:facet name="header">
															<h:outputText id="id13" value="#{msgs.auswahl}" />
														</f:facet>
														<!-- Hinzufügen-Schaltknopf -->
														<h:commandLink action="#{BenutzerverwaltungForm.ZuProjektHinzufuegen}" title="#{msgs.uebernehmen}">
															<h:graphicImage id="id14" value="images/buttons/addUser.gif" />
															<f:param id="id15" name="ID" value="#{item.id}" />
														</h:commandLink>

													</h:column>

												</x:dataTable>

												<table width="100%" border="0">
													<tr valign="top">
														<td align="left">
															<!-- Abbrechen-Schaltknopf -->
															<h:commandLink action="#{NavigationForm.Reload}" value="#{msgs.abbrechen}">
																<f:setPropertyActionListener target="#{BenutzerverwaltungForm.displayMode}" value="" />
															</h:commandLink>
														</td>
														<td align="center">
															<!-- ===================== Datascroller für die Ergebnisse ====================== -->
															<x:aliasBean alias="#{mypage}" value="#{ProjekteForm.paginator}">
																<ui:include src="includes/datascroller.xhtml" />
															</x:aliasBean>
															<!-- ===================== // Datascroller für die Ergebnisse ====================== -->
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</h:panelGroup>

								<x:dataTable id="id52" width="300" rendered="#{BenutzerverwaltungForm.displayMode ne 'project'}"
									columnClasses="standardTable_Column,standardTable_Column,standardTable_ColumnCentered" var="item"
									value="#{BenutzerverwaltungForm.myClass.projekte}">
									<h:column id="id53">
										<h:outputText id="id54" value="#{item.titel}" />
									</h:column>
									<h:column id="id55">
										<!-- Löschen-Schaltknopf -->
										<h:commandLink action="#{BenutzerverwaltungForm.AusProjektLoeschen}" title="#{msgs.ausProjektLoeschen}">
											<h:graphicImage id="id56" value="images/buttons/waste1a_20px.gif" />
											<f:param id="id57" name="ID" value="#{item.id}" />
										</h:commandLink>
									</h:column>
								</x:dataTable>
							</h:panelGroup>


						</h:panelGrid>
					</td>
				</tr>

				<tr>
					<td class="eingabeBoxen_row3" align="left">
						<h:commandButton id="id58" value="#{msgs.abbrechen}" action="user_all" immediate="true" />
					</td>

					<td class="eingabeBoxen_row3" align="right">
						<h:commandButton id="id59" value="#{msgs.loeschen}" action="#{BenutzerverwaltungForm.Loeschen}"
							onclick="return confirm('#{msgs.sollDieserEintragWirklichGeloeschtWerden}?')" rendered="#{BenutzerverwaltungForm.myClass.id != null}" />
						<h:commandButton id="absenden" value="#{msgs.speichern}" action="#{BenutzerverwaltungForm.Speichern}" />
					</td>
				</tr>

			</table>

		</h:form>
	</ui:define>

</ui:composition>