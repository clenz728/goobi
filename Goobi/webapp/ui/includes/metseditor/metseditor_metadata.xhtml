<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:s="http://myfaces.apache.org/sandbox">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <h:form id="formular1" prependId="false">
            <h:panelGroup rendered="#{(not Metadaten.modusHinzufuegen) and (not Metadaten.modusHinzufuegenPerson) and (not Metadaten.modeAddGroup)}">


                <!-- ########################################

                          Speichern der Metadaten und Überschrift

		 		#########################################-->
                <table width="540">
                    <tr>
                        <td>
                            <!-- passende Überschrift -->
                            <h3 style="margin-top: 0px">
                                <h:outputText value="#{msgs.metadatenBearbeiten}" rendered="#{not Metadaten.nurLesenModus}" />
                                <h:outputText value="#{msgs.metadatenBetrachten}" rendered="#{Metadaten.nurLesenModus}" />
                                <h:outputText value=" (#{msgs.schreibgeschuetzt})" rendered="#{Metadaten.nurLesenModus}" style="color: red" />
                            </h3>
                        </td>
                    </tr>
                </table>


                <!-- ########################################

                         Tabelle für die Personen

    			#########################################-->
                <h:panelGroup rendered="#{!empty Metadaten.myPersonen}" style="margin-top:0px; display:block;">

                    <h4 style="margin-top: 0px; margin-bottom: 1px">
                        <h:outputText value="#{msgs.personen}" />
                    </h4>

                    <!-- öffnen der Tabelle -->
                    <h:dataTable value="#{Metadaten.myPersonen}" var="Item" style="background-color:#F0F0F0" styleClass="Tabelle" headerClass="TabelleHeader"
                        columnClasses="TabelleSpalteLinks,TabelleSpalteLinks,TabelleSpalteLinks" width="90%">

                        <!-- Metadaten -->
                        <h:column>
                            <h:panelGrid  style="border-bottom: 0px;" columns="2" columnClasses="first-column, second-column">
                                <h:outputText value="#{msgs.vorname}" style="font-size: 11px" />
                                <h:inputText value="#{Item.vorname}" styleClass="metadatenInput" 
                                    readonly="#{Metadaten.nurLesenModus}">
                                    <f:ajax execute="@form" event="valueChange" render="@form" />
                                </h:inputText>
                                <h:outputText value="#{msgs.nachname}" style="font-size: 11px" />
                                <h:inputText value="#{Item.nachname}" styleClass="metadatenInput" 
                                    readonly="#{Metadaten.nurLesenModus}">
                                    <f:ajax execute="@form" event="valueChange" render="@form" />
                                </h:inputText>
                                <h:outputText value="#{msgs.rolle}" style="font-size: 11px" />
                                <h:selectOneMenu value="#{Item.rolle}" styleClass="metadatenInput" 
                                    disabled="#{Metadaten.nurLesenModus}" readonly="#{Metadaten.nurLesenModus}">
                                    <f:ajax execute="@form" event="valueChange" render="@form" />
                                    <f:selectItems value="#{Item.addableRollen}" />
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <h:panelGroup rendered="#{Item.additionalParts}">

                                <h:commandLink action="#{Item.addNamePart}" value="#{msgs.addNamePart}" title="#{msgs.addNamePart}"
                                    label="#{msgs.addNamePart}">
                                </h:commandLink>

                                <ui:repeat var="part" value="#{Item.additionalNameParts}">
                                    <h:panelGrid style="border-bottom: 0px;" columns="2" width="100%" columnClasses="first-column, second-column">
                                        <h:selectOneMenu value="#{part.type}" readonly="#{Metadaten.nurLesenModus}" styleClass="metadatenInput">
                                            <f:ajax execute="@form" event="valueChange" render="@form" />
                                            <f:selectItems value="#{Item.possibleNamePartTypes}" />
                                        </h:selectOneMenu>
                                        <h:inputText value="#{part.value}" styleClass="metadatenInput" style="width:100%"
                                            readonly="#{Metadaten.nurLesenModus}">
                                            <f:ajax execute="@form" event="valueChange" render="@form" />
                                        </h:inputText>
                                    </h:panelGrid>
                                </ui:repeat>
                            </h:panelGroup>
                            <br />

                            <h:panelGroup rendered="#{Item.normdata}">
                                <h:outputText value="#{msgs.editNormdata}" />

                                <h:panelGrid columns="2" style="border-bottom: 0px;" width="100%" columnClasses="first-column, second-column">
                                    <h:selectOneMenu value="#{Item.normDatabase}" readonly="#{Metadaten.nurLesenModus}" styleClass="metadatenInput">
                                        <f:ajax execute="@form" event="valueChange" render="@form" />
                                        <f:selectItems value="#{Item.possibleDatabases}" var="database" itemLabel="#{database.abbreviation}"
                                            itemValue="#{database}" />
                                    </h:selectOneMenu>
                                    <h:inputText value="#{Item.normdataValue}" styleClass="metadatenInput" style="width:100%"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:ajax execute="@form" event="valueChange" render="@form" />
                                    </h:inputText>

                                </h:panelGrid>
                            </h:panelGroup>
                        </h:column>

                        <!-- Link für Details -->
                        <h:column rendered="#{not Metadaten.nurLesenModus}">
                            <!-- Kopieren-Schaltknopf -->
                            <h:commandLink id="l7" action="#{Metadaten.KopierenPerson}" title="#{msgs.personendatenKopieren}">
                                <h:graphicImage value="images/buttons/copy.gif" />
                                <f:param name="ID" value="#{Item.identifier}" />
                                <x:updateActionListener property="#{Metadaten.curPerson}" value="#{Item}" />
                                <f:ajax execute="@form" render="@form" />
                            </h:commandLink>

                            <!-- Löschen-Schaltknopf -->
                            <h:commandLink id="l6" action="#{Metadaten.LoeschenPerson}" title="#{msgs.personendatenLoeschen}">
                                <h:graphicImage value="images/buttons/waste1a_20px.gif" style="margin-left:3px" />
                                <f:param name="ID" value="#{Item.identifier}" />
                                <x:updateActionListener property="#{Metadaten.curPerson}" value="#{Item}" />
                                <f:ajax execute="@form" render="@form" />
                            </h:commandLink>


                        </h:column>
                    </h:dataTable>
                </h:panelGroup>

                <!-- ########################################

                                                 Tabelle für die Metadaten

 				#########################################-->
                <h:panelGroup rendered="#{!empty Metadaten.myMetadaten}"
                    style="#{empty Metadaten.myPersonen ? 'margin-top:0px':'margin-top:15px;'}; display:block">
                    <h4 style="margin-top: 0px; margin-bottom: 1px">
                        <h:outputText value="#{msgs.metadaten}" />
                    </h4>

                    <!-- öffnen der Tabelle -->
                    <x:dataTable value="#{Metadaten.myMetadaten}" var="Item" styleClass="Tabelle" headerClass="TabelleHeader"
                        columnClasses="first-colum, second-column" width="88%">

                        <!-- Metadaten -->
                        <x:column styleClass="first-column" >
                            <h:outputText value="#{Item.typ}" style="font-size: 11px" />
                        </x:column>

                        <!-- Metadaten -->
                        <h:column >
                            <h:panelGrid columns="1" rendered="#{(Item.outputType == 'textarea')}" width="100%">

                                <h:inputTextarea value="#{Item.value}" immediate="true" readonly="#{Metadaten.nurLesenModus}"
                                    styleClass="metadatenInput" style="height: 45px;">
                                    <f:ajax execute="@form" event="valueChange" />
                                </h:inputTextarea>

                            </h:panelGrid>
                            <h:panelGrid columns="1" rendered="#{(Item.outputType == 'input')}" width="100%">
                                <h:inputText value="#{Item.value}" styleClass="metadatenInput" 
                                    readonly="#{Metadaten.nurLesenModus}">
                                    <f:ajax execute="@form" event="valueChange" />
                                </h:inputText>

                            </h:panelGrid>


                            <h:selectManyListbox value="#{Item.selectedItems}" rendered="#{(Item.outputType == 'select')}" 
                                readonly="#{Metadaten.nurLesenModus}" styleClass="metadatenInput">
                                <f:ajax execute="@form" event="valueChange" />
                                <f:selectItems value="#{Item.items}" itemValue="#{element.label}" var="element" itemLabel="#{element.label}" />
                            </h:selectManyListbox>
                            <h:selectOneMenu value="#{Item.selectedItem}" rendered="#{(Item.outputType == 'select1')}"
                                readonly="#{Metadaten.nurLesenModus}" styleClass="metadatenInput" >
                                <f:ajax execute="@form" event="valueChange" />
                                <f:selectItems value="#{Item.items}" itemValue="#{element.label}" var="element" itemLabel="#{element.label}" />
                            </h:selectOneMenu>
                            <h:outputText id="myOutput" value="#{Item.value}" rendered="#{(Item.outputType == 'readonly')}"
                                styleClass="metadatenInput, second-column" style="border: 0 none;" />

                            <h:panelGroup rendered="#{Item.normdata}" >
                                <h:panelGrid columns="2" width="100%" columnClasses="first-column, second-column">
                                    <h:selectOneMenu value="#{Item.normDatabase}" readonly="#{Metadaten.nurLesenModus}" styleClass="metadatenInput">
                                        <f:ajax execute="@form" event="valueChange" />
                                        <f:selectItems value="#{Item.possibleDatabases}" var="database" itemLabel="#{database.abbreviation}"
                                            itemValue="#{database}" />
                                    </h:selectOneMenu>
                                    <h:inputText value="#{Item.normdataValue}" styleClass="metadatenInput" style="width:100%"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:ajax execute="@form" event="valueChange" />
                                    </h:inputText>
                                </h:panelGrid>
                            </h:panelGroup>


                        </h:column>
                        <!-- Link für Details -->
                        <h:column rendered="#{not Metadaten.nurLesenModus}"> 
                            <!-- Kopieren-Schaltknopf -->
                            <h:commandLink id="l5" action="#{Metadaten.Kopieren}" title="#{msgs.metadatenKopieren}">
                                <h:graphicImage value="images/buttons/copy.gif" />
                                <f:param name="ID" value="#{Item.identifier}" />
                                <x:updateActionListener property="#{Metadaten.curMetadatum}" value="#{Item}" />
                            </h:commandLink>
                            <!-- Transliterieren-Schaltknopf -->
                            <h:commandLink action="#{Metadaten.Transliterieren}" rendered="#{Item.typ=='russian Title'}"
                                title="#{msgs.diesesFeldTransliterieren}">
                                <h:graphicImage value="images/buttons/translit.gif" style="margin-left:3px" />
                                <f:param name="ID" value="#{Item.identifier}" />
                                <x:updateActionListener property="#{Metadaten.curMetadatum}" value="#{Item}" />
                            </h:commandLink>
                            <!-- Löschen-Schaltknopf -->
                            <h:commandLink id="l4" action="#{Metadaten.Loeschen}" title="#{msgs.metadatenLoeschen}">
                                <h:graphicImage value="images/buttons/waste1a_20px.gif" style="margin-left:3px" />
                                <f:param name="ID" value="#{Item.identifier}" />
                                <x:updateActionListener property="#{Metadaten.curMetadatum}" value="#{Item}" />
                            </h:commandLink>

                        </h:column>
                    </x:dataTable>
                </h:panelGroup>


                <!-- table for metadata groups -->

                <h:panelGroup rendered="#{!empty Metadaten.groups}"
                    style="#{empty Metadaten.myPersonen ? 'margin-top:0px':'margin-top:15px;'}; display:block">
                    <h4 style="margin-top: 0px; margin-bottom: 1px">
                        <h:outputText value="#{msgs.metadataGroups}" />
                    </h4>

                    <!-- öffnen der Tabelle -->
                    <x:dataTable value="#{Metadaten.groups}" var="Item" styleClass="Tabelle" headerClass="TabelleHeader"
                        columnClasses="">

                        <!-- Metadaten -->
                        <x:column style="vertical-align:top;width:70px;" >
                            <h3>
                                <h:outputText value="#{Item.name}" style="font-size: 11px" />
                            </h3>
                        </x:column>

                        <x:column columnClasses="first-column,metadatenInput" >
                            <h:dataTable value="#{Item.metadataList}" var="metadata" style="border-bottom: 0px;">
                                <x:column style="vertical-align:top;border-bottom: 0px;width:40px;">
                                    <h:outputText value="#{metadata.typ}" style="font-size: 11px" />
                                </x:column>

                                <x:column style="vertical-align:top;border-bottom: 0px;">
                                    <h:panelGrid columns="1" rendered="#{(metadata.outputType == 'textarea')}" style="vertical-align:top;border-bottom: 0px;">
                                        <h:inputTextarea value="#{metadata.value}" immediate="true" readonly="#{Metadaten.nurLesenModus}"
                                            styleClass="metadatenInput" style="height: 45px;width:350px;">
                                            <f:ajax execute="@form" event="valueChange" />
                                        </h:inputTextarea>
                                    </h:panelGrid>

                                         <h:inputText value="#{metadata.value}" styleClass="metadatenInput" style="width:350px;" rendered="#{(metadata.outputType == 'input')}"
                                            readonly="#{Metadaten.nurLesenModus}">
                                            <f:ajax execute="@form" event="valueChange" />
                                        </h:inputText>
                                   
                                    <h:selectManyListbox value="#{metadata.selectedItems}" rendered="#{(metadata.outputType == 'select')}"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:ajax execute="@form" event="valueChange" />
                                        <f:selectItems value="#{metadata.items}" itemValue="#{element.label}" var="element"
                                            itemLabel="#{element.label}" />
                                    </h:selectManyListbox>
                                    <h:selectOneMenu value="#{metadata.selectedItem}" rendered="#{(metadata.outputType == 'select1')}"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:ajax execute="@form" event="valueChange" />
                                        <f:selectItems value="#{metadata.items}" itemValue="#{element.label}" var="element"
                                            itemLabel="#{element.label}" />
                                    </h:selectOneMenu>
                                    <h:outputText value="#{metadata.value}" rendered="#{(metadata.outputType == 'readonly')}"
                                        styleClass="metadatenInput" style="border: 0 none;" />
                                </x:column>



                            </h:dataTable>

                            <h:dataTable value="#{Item.personList}" var="currentPerson" style="vertical-align:top;border-bottom: 0px;">
                                <h:column>
                                    <h:panelGrid columns="2">
                                        <h:outputText value="#{msgs.vorname}" style="font-size: 11px" />

                                        <h:inputText value="#{currentPerson.vorname}" styleClass="metadatenInput" 
                                            readonly="#{Metadaten.nurLesenModus}">
                                        </h:inputText>


                                        <h:outputText value="#{msgs.nachname}" style="font-size: 11px" />
                                        <h:inputText value="#{currentPerson.nachname}" styleClass="metadatenInput" 
                                            readonly="#{Metadaten.nurLesenModus}">
                                        </h:inputText>
                                        <h:outputText value="#{msgs.rolle}" style="font-size: 11px" />
                                        <h:outputText value="#{currentPerson.rolle}" styleClass="metadatenInput" 
                                            disabled="#{Metadaten.nurLesenModus}" />
                                    </h:panelGrid>
                                </h:column>
                            </h:dataTable>
                        </x:column>


                        <h:column rendered="#{not Metadaten.nurLesenModus}">
                            <!-- Kopieren-Schaltknopf -->
                            <h:commandLink action="#{Metadaten.CopyGroup}" title="#{msgs.metadatenKopieren}">
                                <h:graphicImage value="images/buttons/copy.gif" />
                                <x:updateActionListener property="#{Metadaten.currentGroup}" value="#{Item}" />
                                <f:ajax execute="@form" render="@form" />
                            </h:commandLink>

                            <!-- Löschen-Schaltknopf -->
                            <h:commandLink action="#{Metadaten.deleteGroup}" title="#{msgs.metadatenLoeschen}">
                                <h:graphicImage value="images/buttons/waste1a_20px.gif" style="margin-left:3px" />
                                <x:updateActionListener property="#{Metadaten.currentGroup}" value="#{Item}" />
                                <f:ajax execute="@form" render="@form" />
                            </h:commandLink>

                        </h:column>

                    </x:dataTable>
                </h:panelGroup>


                <!-- ########################################

                          Speichern der Metadaten oder neue hinzufügen

 				#########################################-->
                <table width="540">
                    <tr>
                        <td>
                            <h:panelGroup
                                rendered="#{not Metadaten.modusHinzufuegen and not Metadaten.modusHinzufuegenPerson and not Metadaten.nurLesenModus}"
                                style="margin-top:10px">
                                <!-- Hinzufuegen-Schaltknopf für Person-->
                                <h:commandLink id="l2" action="#{Metadaten.HinzufuegenPerson}" style="margin-left:2px"
                                    title="#{msgs.neuePersonAnlegen}" rendered="#{Metadaten.sizeOfRoles!=0}">


                                    <h:graphicImage value="images/buttons/new.gif" style="border: 0px;vertical-align:middle" />
                                    <h:outputText value="#{msgs.neuePersonHinzufuegen}" />
                                	<f:ajax render="@form" />
                                </h:commandLink>
                                <br />
                                <!-- Hinzufuegen-Schaltknopf für Metadaten -->
                                <h:commandLink id="l1" action="#{Metadaten.Hinzufuegen}" style="margin-left:2px" title="#{msgs.neuesMetadatumAnlegen}"
                                    rendered="#{Metadaten.sizeOfMetadata!=0}">
                                    <h:graphicImage value="images/buttons/new.gif" style="border: 0px;vertical-align:middle" />
                                    <h:outputText value="#{msgs.neueMetadatenHinzufuegen}" />
                                    <f:ajax render="@form" />
                                </h:commandLink>
                                <br />
                                <!-- add group -->
                                <h:commandLink action="#{Metadaten.AddGroup}" style="margin-left:2px" title="#{msgs.AddNewGroup}"
                                    rendered="#{Metadaten.sizeOfMetadataGroups!=0}">
                                    <h:graphicImage value="images/buttons/new.gif" style="border: 0px;vertical-align:middle" />
                                    <h:outputText value="#{msgs.AddNewGroup}" />
                                    <f:ajax render="@form" />
                                </h:commandLink>


                            </h:panelGroup>
                        </td>
                        <!-- 
			<td width="10%" valign="top" align="right" nowrap="">
				<div id="x2">
					<h:outputLink value="Metadaten2rechts.jsf" target="_self"
						title="#{msgs.dieAenderungenVerwerfen}"
						rendered="#{not Metadaten.nurLesenModus}">
						<h:graphicImage value="images/buttons/cancel3.gif"
							style="border: 0px;vertical-align:middle;" />
						<h:outputText value="#{msgs.abbrechen}" />
					</h:outputLink>
				</div>
			</td>
			<td width="10%" valign="top" align="right" nowrap="">
				<div id="y2">
					<h:commandLink action="#{Metadaten.Reload}" style="margin:5px"
						title="#{msgs.dieAenderungenSpeichern}"
						onclick="document.getElementById('formular4:DatenGeaendert').value = '0'"
						rendered="#{not Metadaten.nurLesenModus}">
						<h:graphicImage value="images/buttons/ok.gif"
							style="border: 0px;vertical-align:middle;" />
						<h:outputText value="#{msgs.speichern}" />
					</h:commandLink>
				</div>
			</td>
			-->
                    </tr>
                </table>

            </h:panelGroup>


            <!-- ########################################

                  Formular für neue Metadaten

			#########################################-->
            <h:panelGroup rendered="#{Metadaten.modusHinzufuegen}">
                <h3 style="margin-top: 0px">
                    <h:outputText value="#{msgs.neuesMetadatumAnlegen}" />
                </h3>
                <table id="render" cellpadding="3" cellspacing="0" style="width: 540px" class="eingabeBoxen">
                    <tr>
                        <td class="eingabeBoxen_row1">
                            <h:outputText value="#{msgs.metadatenBearbeiten}" />
                        </td>
                    </tr>
                    <tr>
                        <td class="eingabeBoxen_row2">
                            <h:panelGrid id="grid1" columns="2">
                                <!-- typ -->
                                <h:outputLabel for="mytyp" value="#{msgs.typ}" />

                                <h:panelGroup>
                                    <h:selectOneMenu id="mytyp" style="width: 400px;margin-right:15px" value="#{Metadaten.tempTyp}" required="true">
                                        <f:selectItems value="#{Metadaten.addableMetadataTypes}" />
                                        <f:ajax render="@form" />
                                    </h:selectOneMenu>
                                    <x:message for="mytyp" style="color: red" replaceIdWithLabel="true" />
                                </h:panelGroup>

                                <h:outputLabel for="myValues" value="#{msgs.wert}" />

                                <h:panelGroup>
                                    <x:div id="myValues">

                                        <h:inputTextarea id="myTextarea" value="#{Metadaten.metadatum.value}" immediate="true"
                                            rendered="#{(Metadaten.outputType == 'textarea')}" styleClass="metadatenInput"
                                            style="width: 350px;height: 45px;">
                                        </h:inputTextarea>
                                        <h:inputText id="myInput" value="#{Metadaten.metadatum.value}" rendered="#{(Metadaten.outputType == 'input')}"
                                            styleClass="metadatenInput"  />
                                        <h:selectManyListbox id="mySelect" value="#{Metadaten.metadatum.selectedItems}"
                                            rendered="#{(Metadaten.outputType == 'select')}" immediate="true">
                                            <f:selectItems value="#{Metadaten.metadatum.items}" />
                                        </h:selectManyListbox>
                                        <h:selectOneMenu id="mySelect1" value="#{Metadaten.metadatum.selectedItem}"
                                            rendered="#{(Metadaten.outputType == 'select1')}" immediate="true">
                                            <f:selectItems value="#{Metadaten.metadatum.items}" />
                                        </h:selectOneMenu>
                                        <h:outputText id="myOutput" value="#{Metadaten.metadatum.value}"
                                            rendered="#{(Metadaten.outputType == 'readonly')}" styleClass="metadatenInput"  />
                                    </x:div>
                                </h:panelGroup>
                            </h:panelGrid>
                        </td>
                    </tr>

                    <tr>
                        <td class="eingabeBoxen_row3">
                            <h:commandButton action="#{Metadaten.Abbrechen}" value="#{msgs.abbrechen}" immediate="false">
                                <x:updateActionListener value="huhu" property="#{Metadaten.metadatum.value}"></x:updateActionListener>
                            	<f:ajax execute="@form" render="@form" />
                            </h:commandButton>
                            <x:commandButton id="absenden" forceId="true" type="submit" action="#{Metadaten.Speichern}"
                                value="#{msgs.dieAenderungenSpeichern}">
                                <f:ajax execute="@form" render="@form" />
                            </x:commandButton>
                        </td>
                    </tr>

                </table>
            </h:panelGroup>



            <!-- ########################################

                     			Formular für neue Person

  #########################################-->
            <h:panelGroup rendered="#{Metadaten.modusHinzufuegenPerson}">
                <h3 style="margin-top: 0px">
                    <h:outputText value="#{msgs.neuePersonAnlegen}" />
                </h3>
                <table cellpadding="3" cellspacing="0" style="width: 540px" class="eingabeBoxen">
                    <tr>
                        <td class="eingabeBoxen_row1">
                            <h:outputText value="#{msgs.personBearbeiten}" />
                        </td>
                    </tr>
                    <tr>
                        <td class="eingabeBoxen_row2">
                            <h:panelGrid columns="2">
                                <!-- vorname -->
                                <h:outputLabel for="vorname" value="#{msgs.vorname}" />
                                <h:panelGroup>
                                    <h:inputText id="vorname" style="width: 400px;margin-right:15px" value="#{Metadaten.tempPersonVorname}" />
                                    <x:message for="vorname" style="color: red" replaceIdWithLabel="true" />
                                </h:panelGroup>

                                <!-- nachname -->
                                <h:outputLabel for="nachname" value="#{msgs.nachname}" />
                                <h:panelGroup>
                                    <h:inputText id="nachname" style="width: 400px;margin-right:15px" value="#{Metadaten.tempPersonNachname}" />
                                    <x:message for="nachname" style="color: red" replaceIdWithLabel="true" />
                                </h:panelGroup>

                                <!-- Rolle -->
                                <h:outputLabel for="Rolle" value="#{msgs.rolle}" />
                                <h:panelGroup>
                                    <h:selectOneMenu id="Rolle" value="#{Metadaten.tempPersonRolle}" style="margin-right:15px">
                                        <f:selectItems value="#{Metadaten.addableRollen}" />
                                    </h:selectOneMenu>
                                    <x:message for="Rolle" style="color: red" replaceIdWithLabel="true" />
                                </h:panelGroup>

                            </h:panelGrid>
                        </td>
                    </tr>

                    <tr>
                        <td class="eingabeBoxen_row3">
                            <h:commandButton action="#{Metadaten.Abbrechen}" value="#{msgs.abbrechen}" immediate="true">
                            	<f:ajax execute="@form" render="@form" />
                            </h:commandButton>
                            <x:commandButton id="absenden2" forceId="true" type="submit" action="#{Metadaten.SpeichernPerson}"
                                value="#{msgs.dieAenderungenSpeichern}">
                                <f:ajax execute="@form" render="@form" />
                            </x:commandButton>
                        </td>
                    </tr>

                </table>
            </h:panelGroup>



            <h:panelGroup rendered="#{Metadaten.modeAddGroup}">
                <h3 style="margin-top: 0px">
                    <h:outputText value="#{msgs.AddNewGroup}" />
                </h3>
                <table cellpadding="3" cellspacing="0" style="width: 540px" class="eingabeBoxen">
                    <tr>
                        <td class="eingabeBoxen_row1">
                            <h:outputText value="#{msgs.editGroup}" />
                        </td>
                    </tr>
                    <tr>
                        <td class="eingabeBoxen_row2">
                            <h:panelGrid columns="2">

                                <!-- Rolle -->
                                <h:outputLabel for="groups" value="#{msgs.availableGroup}" />
                                <h:panelGroup>
                                    <h:selectOneMenu id="groups" value="#{Metadaten.tempMetadataGroupType}" style="width: 400px;margin-right:15px">
                                        <f:selectItems value="#{Metadaten.addableMetadataGroupTypes}" />
                                        <f:ajax execute="@form" event="valueChange" />
                                    </h:selectOneMenu>
                                    <x:message for="groups" style="color: red" replaceIdWithLabel="true" />
                                </h:panelGroup>

                            </h:panelGrid>
                        </td>
                    </tr>
                    <tr>
                        <td class="eingabeBoxen_row2">
                            <h:dataTable value="#{Metadaten.selectedGroup.metadataList}" var="metadata">
                                <h:column>
                                    <h:outputText value="#{metadata.typ}" style="font-size: 11px" />
                                </h:column>

                                <h:column>
                                    <h:panelGrid columns="1" rendered="#{(metadata.outputType == 'textarea')}">
                                        <h:inputTextarea value="#{metadata.value}" immediate="true" readonly="#{Metadaten.nurLesenModus}"
                                            styleClass="metadatenInput" style="height: 45px;">
                                        </h:inputTextarea>
                                    </h:panelGrid>

                                    <h:panelGrid columns="1" rendered="#{(metadata.outputType == 'input')}">
                                        <h:inputText value="#{metadata.value}" styleClass="metadatenInput" 
                                            readonly="#{Metadaten.nurLesenModus}">
                                        </h:inputText>
                                    </h:panelGrid>

                                    <h:selectManyListbox value="#{metadata.selectedItems}" rendered="#{(metadata.outputType == 'select')}"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:selectItems value="#{metadata.items}" itemValue="#{element.label}" var="element"
                                            itemLabel="#{element.label}" />
                                    </h:selectManyListbox>
                                    <h:selectOneMenu value="#{metadata.selectedItem}" rendered="#{(metadata.outputType == 'select1')}"
                                        readonly="#{Metadaten.nurLesenModus}">
                                        <f:selectItems value="#{metadata.items}" itemValue="#{element.label}" var="element"
                                            itemLabel="#{element.label}" />
                                    </h:selectOneMenu>
                                    <h:outputText value="#{metadata.value}" rendered="#{(metadata.outputType == 'readonly')}"
                                        styleClass="metadatenInput" style="border: 0 none;" />
                                </h:column>



                            </h:dataTable>
                        </td>
                    </tr>
                    <tr>

                        <td class="eingabeBoxen_row2">
                            <h:dataTable value="#{Metadaten.selectedGroup.personList}" var="person">
                                <h:column>

                                    <h:panelGrid columns="2">
                                        <!-- vorname -->
                                        <h:outputLabel for="vornameGroup" value="#{msgs.vorname}" />
                                        <h:panelGroup>
                                            <h:inputText id="vornameGroup" style="width: 400px;margin-right:15px" value="#{person.vorname}" />
                                            <x:message for="vornameGroup" style="color: red" replaceIdWithLabel="true" />
                                        </h:panelGroup>

                                        <!-- nachname -->
                                        <h:outputLabel for="nachnameGroup" value="#{msgs.nachname}" />
                                        <h:panelGroup>
                                            <h:inputText id="nachnameGroup" style="width: 400px;margin-right:15px" value="#{person.nachname}" />
                                            <x:message for="nachnameGroup" style="color: red" replaceIdWithLabel="true" />
                                        </h:panelGroup>

                                        <!-- Rolle -->
                                        <h:outputLabel for="RolleGroup" value="#{msgs.rolle}" />
                                        <h:outputText id="RolleGroup" value="#{person.rolle}" style="width: 400px;margin-right:15px" />
                                    </h:panelGrid>
                                </h:column>
                            </h:dataTable>
                        </td>

                    </tr>
                    <tr>
                        <td class="eingabeBoxen_row3">
                            <h:commandButton action="#{Metadaten.Abbrechen}" value="#{msgs.abbrechen}" immediate="true">
                            	<f:ajax execute="@form" render="@form" />
                            </h:commandButton>
                            <x:commandButton id="absenden3" forceId="true" type="submit" action="#{Metadaten.saveGroup}"
                                value="#{msgs.dieAenderungenSpeichern}">
 	                           <f:ajax execute="@form" render="@form" />
                            </x:commandButton>
                        </td>
                    </tr>

                </table>
            </h:panelGroup>


        </h:form>
    </composite:implementation>

</ui:composition>


