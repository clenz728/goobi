<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
	xmlns:x="http://myfaces.apache.org/tomahawk">

	<composite:interface>
	</composite:interface>

	<composite:implementation>

		<table cellpadding="3" cellspacing="0" width="100%" class="eingabeBoxen">
			<tr>
				<td class="eingabeBoxen_row1">
					<h:outputText id="uaid2" value="#{msgs.defineStatisticalQuestion}" />
				</td>
			</tr>
			<tr>
				<td class="eingabeBoxen_row2">

					<h:panelGrid id="uaid3" columns="8"
						columnClasses="standardTable_ColumnRight,standardTable_Column,standardTable_ColumnRight,standardTable_Column,standardTable_ColumnRight,standardTable_Column, standardTable_Column">

						<h:outputLabel id="uaid4" for="from" value="#{msgs.zeitraum} #{msgs.from}" style="width:150px" />
						<h:panelGroup id="uaid5">
							<x:inputCalendar id="from" style="width:110px" value="#{Form.statisticsManager3.sourceDateFrom}" renderAsPopup="true"
								renderPopupButtonAsImage="true" popupTodayString="#{msgs.heute}" popupWeekString="#{msgs.kw}" styleClass="projekteBearbeiten"
								imageLocation="images/calendarImages" popupButtonImageUrl="images/calendarImages/calendar.gif" />
						</h:panelGroup>

						<h:outputLabel id="uaid6" for="to" value="#{msgs.to}" />
						<h:panelGroup id="uaid7">
							<x:inputCalendar id="to" style="width:110px" value="#{Form.statisticsManager3.sourceDateTo}" renderAsPopup="true"
								renderPopupButtonAsImage="true" popupTodayString="#{msgs.heute}" popupWeekString="#{msgs.kw}" imageLocation="images/calendarImages"
								styleClass="projekteBearbeiten" popupButtonImageUrl="images/calendarImages/calendar.gif" />
						</h:panelGroup>

						<h:outputText id="uaid8" style="font-weight:bold" value=" - #{msgs.orLast} - " />

						<h:inputText id="uaid9" style="width:130px;text-align:right" required="false" value="#{Form.statisticsManager3.sourceNumberOfTimeUnitsAsString}" />

						<h:selectOneMenu id="uaid10" style="width:130px" value="#{Form.statisticsManager3.sourceTimeUnit}" converter="StatisticsTimeUnitConverter">
							<f:selectItems id="uaid11" value="#{Form.statisticsManager3.allTimeUnits}" var="unit" itemLabel="#{unit.title}" itemValue="#{unit}" />
						</h:selectOneMenu>

						<h:panelGroup id="uaid12" style="margin-bottom:0px">
							<h:selectBooleanCheckbox id="uaid13" value="#{Form.statisticsManager3.showAverage}" title="#{msgs.showAverage}">
							</h:selectBooleanCheckbox>
							<h:outputLabel for="uaid13" id="uaid14" value="#{msgs.showAverage}" />
						</h:panelGroup>

						<h:outputText id="uaid15" value="#{msgs.einheit}" style="width:150px" />

						<h:selectOneMenu id="uaid16" style="width:130px" value="#{Form.statisticsManager3.targetTimeUnit}" converter="StatisticsTimeUnitConverter">
							<f:selectItems id="uaid17" value="#{Form.statisticsManager3.allTimeUnits}" var="unit" itemLabel="#{unit.title}" itemValue="#{unit}" />
						</h:selectOneMenu>

						<h:outputText id="uaid18" value="#{msgs.anzeige}" />

						<h:selectOneMenu id="uaid19" style="width:130px" value="#{Form.statisticsManager3.targetCalculationUnit}"
							converter="StatisticsCalculationUnitConverter">
							<f:selectItems id="uaid20" value="#{Form.statisticsManager3.allCalculationUnits}" var="unit" itemLabel="#{unit.title}" itemValue="#{unit}" />
						</h:selectOneMenu>

						<h:outputText id="uaid21" value="#{msgs.ausgabe}" />

						<h:selectOneMenu id="uaid22" style="width:130px" value="#{Form.statisticsManager3.targetResultOutput}"
							converter="StatisticsResultOutputConverter">
							<f:selectItems id="uaid23" value="#{Form.statisticsManager3.allResultOutputs}" var="out" itemLabel="#{out.title}" itemValue="#{out}" />
						</h:selectOneMenu>

						<h:panelGroup id="uaid241" style="margin-bottom:0px">
							<h:outputText>
							</h:outputText>
						</h:panelGroup>

						<!-- the following is an alternating couple to make the columns match -->
						<h:panelGroup id="uaid242" style="margin-bottom:0px" rendered="#{!Form.statisticsManager3.renderLoopOption}">
							<h:outputText>
							</h:outputText>
						</h:panelGroup>

						<h:panelGroup id="uaid25" style="margin-bottom:0px" rendered="#{Form.statisticsManager3.renderLoopOption}">
							<h:selectBooleanCheckbox id="uaid26_2" value="#{Form.statisticsManager3.includeLoops}" title="#{msgs.includeLoops}">
							</h:selectBooleanCheckbox>
							<h:outputLabel for="uaid26_2" id="uaid27_2" value="#{msgs.includeLoops}" />
						</h:panelGroup>

					</h:panelGrid>

					<x:commandButton id="myStatisticButton" style="margin:5px" title="#{msgs.calculateStatistics}" value="#{msgs.calculateStatistics} "
						action="#{Form.statisticsManager3.calculate}">
						<x:updateActionListener property="#{Form.showStatistics}" value="true" />
					</x:commandButton>


					<br />

				</td>
			</tr>

		</table>


		<h:panelGroup rendered="#{Form.statisticsManager3 != null and !Form.statisticsManager3.statisticMode.isSimple and Form.showStatistics}">
			<x:dataList id="uaid29" var="element" rendered="#{Form.statisticsManager3.renderingElements!=null}"
				value="#{Form.statisticsManager3.renderingElements}" layout="ordered list" rowCountVar="rowCount" rowIndexVar="rowIndex">

				<h4 style="margin-top: 20px">
					<h:outputText id="uaid30" value="#{element.title}" />
				</h4>

				<h:panelGroup id="uaid33">

					<h:graphicImage style="margin-bottom:15px" url="#{HelperForm.servletPathWithHostAsUrl}/imagesTemp/#{element.imageUrl}"
						alt="#{element.title}" title="#{element.title}"
						rendered="#{element.dataTable.showableInChart and (Form.statisticsManager3.targetResultOutput=='chart' or Form.statisticsManager3.targetResultOutput=='chartAndTable')}" />

					<h:outputText id="uaid34" value="#{element.htmlTableRenderer.rendering}" escape="false"
						rendered="#{element.dataTable.showableInTable and (Form.statisticsManager3.targetResultOutput== 'table' or Form.statisticsManager3.targetResultOutput=='chartAndTable')}" />

					<h:commandLink action="#{Form.CreateExcel}" title="#{msgs.createExcel}"
						rendered="#{element.dataTable.showableInTable and (Form.statisticsManager3.targetResultOutput== 'table' or Form.statisticsManager3.targetResultOutput=='chartAndTable')}">
						<h:graphicImage value="images/buttons/excel20.png" />
						<h:outputText value="  #{msgs.createExcel}" />
						<x:updateActionListener value="#{element}" property="#{Form.myCurrentTable}" />
					</h:commandLink>
				</h:panelGroup>
			</x:dataList>

		</h:panelGroup>


	</composite:implementation>

</ui:composition>


