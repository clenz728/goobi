<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:x="http://myfaces.apache.org/tomahawk">

	<composite:interface>
	</composite:interface>

	<composite:implementation>

		<table cellpadding="3" cellspacing="0" style="width: 100%">
			<tr style="vertical-align: top">
				<td>
					<!-- Box f端r die Darstellung der Details -->
					<h:form rendered="#{ProzessverwaltungForm.modusBearbeiten!='prozess'}" id="processdetails">

						<table cellpadding="3" cellspacing="0" width="100%" class="main_statistikboxen">
							<tr>
								<td class="main_statistikboxen_row1">
									<h:outputText value="#{msgs.prozess}" />
								</td>
								<td class="main_statistikboxen_row1" align="right">
									<h:commandLink action="#{ProzessverwaltungForm.Reload}">
										<h:graphicImage value="images/reload.gif" />
									</h:commandLink>
								</td>
							</tr>


							<tr>
								<td class="main_statistikboxen_row2" colspan="2">
									<table border="0" width="100%" cellpadding="2">
										<tr>
											<td width="150">
												<h:outputText value="#{msgs.prozessTitel}:" />
											</td>
											<td>
												<h:outputText value="#{ProzessverwaltungForm.myProzess.titel}" />
											</td>
											<td rowspan="2" align="right">
												<h:commandLink title="#{msgs.prozessdetailsBearbeiten}" action="#{NavigationForm.Reload}" style=";margin-right:20px"
													rendered="#{(LoginForm.maximaleBerechtigung == 1) || (LoginForm.maximaleBerechtigung == 2)}">
													<h:graphicImage value="images/buttons/edit_20.gif" />
													<x:updateActionListener property="#{ProzessverwaltungForm.modusBearbeiten}" value="prozess" />
												</h:commandLink>
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText value="#{msgs.projekt}:" />
											</td>
											<td>
												<h:outputText value="#{ProzessverwaltungForm.myProzess.projekt.titel}" />
											</td>
										</tr>

										<!-- 			<tr>
					<td width="150">
						<h:outputText value="#{msgs.ausgabename}:" />
					</td>
					<td>
						<h:outputText
							value="#{ProzessverwaltungForm.myProzess.ausgabename}" />
					</td>
				</tr>
-->
										<tr>
											<td width="150">
												<h:outputText value="#{msgs.erstellungsdatum}:" />
											</td>
											<td>
												<h:outputText value="#{ProzessverwaltungForm.myProzess.erstellungsdatum}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText value="#{msgs.regelsatz}:" />
											</td>
											<td>
												<h:outputText value="#{ProzessverwaltungForm.myProzess.regelsatz.titel}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText value="#{msgs.docket}:" />
											</td>
											<td>
												<h:outputText value="#{ProzessverwaltungForm.myProzess.docket.name}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText value="#{msgs.inAuswahllisteAnzeigen}:" />
											</td>
											<td>
												<h:graphicImage value="images/check_false.gif" rendered="#{not ProzessverwaltungForm.myProzess.inAuswahllisteAnzeigen}" />
												<h:graphicImage value="images/check_true.gif" rendered="#{ProzessverwaltungForm.myProzess.inAuswahllisteAnzeigen}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText value="#{msgs.istTemplate}:" />
											</td>
											<td>
												<h:graphicImage value="images/check_false.gif" rendered="#{not ProzessverwaltungForm.myProzess.istTemplate}" />
												<h:graphicImage value="images/check_true.gif" rendered="#{ProzessverwaltungForm.myProzess.istTemplate}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText styleClass="text_light" value="#{msgs.id}:" />
											</td>
											<td>
												<h:outputText styleClass="text_light" value="#{ProzessverwaltungForm.myProzess.id}" />
											</td>
										</tr>

										<tr>
											<td width="150">
												<h:outputText styleClass="text_light" value="#{msgs.batch}:" />
											</td>
											<td>
												<h:outputText styleClass="text_light" value="#{ProzessverwaltungForm.myProzess.batchID}" />
											</td>
										</tr>
									</table>

								</td>
							</tr>
						</table>

					</h:form>
				</td>
				<td>
					<h:panelGroup rendered="#{ProzessverwaltungForm.modusBearbeiten!='prozess'}">

						<h:form id="htmleditorform">
							<h:inputText id="myTextArea" value="#{ProzessverwaltungForm.wikiField}" style="width: 50%" />
						</h:form>
						<h:form id="addToWikiForm">
							<h:inputText id="addToTextArea" value="#{ProzessverwaltungForm.addToWikiField}" style="width: 60%" />
							<h:commandButton value="#{msgs.nachrichtHinzufuegen}" action="#{ProzessverwaltungForm.addToWikiField}">

							</h:commandButton>
						</h:form>
					</h:panelGroup>
				</td>
			</tr>
		</table>


		<h:form rendered="#{ProzessverwaltungForm.modusBearbeiten=='prozess'}">
			<!-- Box f端r die Bearbeitung der Details -->
			<table cellpadding="3" cellspacing="0" width="100%" class="eingabeBoxen">

				<tr>
					<td class="eingabeBoxen_row1" colspan="2">
						<h:outputText value="#{msgs.prozess}" />
					</td>
				</tr>
				<!-- Formular f端r die Bearbeitung des Prozesses -->
				<tr>
					<td class="eingabeBoxen_row2" colspan="2">
						<h:panelGrid columns="2">

							<!-- Felder -->
							<h:outputLabel for="titel" value="#{msgs.prozessTitel}" />
							<h:panelGroup>
								<h:inputText id="titel" style="width: 300px;margin-right:15px" value="#{ProzessverwaltungForm.myNewProcessTitle}" required="true" />
								<x:message for="titel" style="color: red" detailFormat="#{msgs.keinTitelAngegeben}" />
							</h:panelGroup>

							<h:outputLabel for="prozess" value="#{msgs.projekt}" />
							<h:panelGroup>
								<h:selectOneMenu id="prozess" style="width: 300px;margin-right:15px" value="#{ProzessverwaltungForm.projektAuswahl}" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.bitteAuswaehlen}" />
									<f:selectItems value="#{ProzessverwaltungForm.projektAuswahlListe}" />
								</h:selectOneMenu>
								<x:message for="prozess" style="color: red" detailFormat="#{msgs.keinProjektAngegeben}" />
							</h:panelGroup>


							<!-- Preferences -->
							<h:outputLabel for="Regelsatz" value="#{msgs.regelsatz}" />
							<h:panelGroup>
								<h:selectOneMenu id="Regelsatz" value="#{ProzessverwaltungForm.rulesetSelection}"
									style="width: 300px;margin-right:15px" required="true">
									<f:selectItems value="#{ProzessverwaltungForm.rulesetSelectionList}" />
								</h:selectOneMenu>
								<x:message for="Regelsatz" style="color: red" replaceIdWithLabel="true" />
							</h:panelGroup>
							
							<!-- dockets -->
							<h:outputLabel for="docket" value="#{msgs.docket}" />
							<h:panelGroup>
								<h:selectOneMenu id="docket" style="width: 300px;margin-right:15px" value="#{ProzessverwaltungForm.docketSelection}"
									>
									<f:selectItems value="#{ProzessverwaltungForm.docketSelectionList}" />
								</h:selectOneMenu>
							</h:panelGroup>

							<h:outputText value="#{msgs.inAuswahllisteAnzeigen}" />
							<h:selectBooleanCheckbox value="#{ProzessverwaltungForm.myProzess.inAuswahllisteAnzeigen}" />

							<h:outputText value="#{msgs.istTemplate}" />
							<h:selectBooleanCheckbox id="check" value="#{ProzessverwaltungForm.myProzess.istTemplate}" />
						</h:panelGrid>
					</td>
				</tr>

				<tr>
					<td class="eingabeBoxen_row3" align="left">
						<h:commandButton value="#{msgs.abbrechen}" immediate="true" action="process_all" rendered="#{ProzessverwaltungForm.myProzess.id == null}"/>

						<h:commandButton value="#{msgs.abbrechen}" immediate="true" action="#{NavigationForm.Reload}" rendered="#{ProzessverwaltungForm.myProzess.id != null}">
							<x:updateActionListener property="#{ProzessverwaltungForm.modusBearbeiten}" value="" />
						</h:commandButton>
					</td>
					<td class="eingabeBoxen_row3" align="right">
						<h:commandButton value="#{msgs.contentLoeschen}" action="#{ProzessverwaltungForm.ContentLoeschen}"
							onclick="if (!confirm('#{msgs.sollDerContentWirklichGeloeschtWerden}')) return false" rendered="#{ProzessverwaltungForm.myProzess.id != null}" />
						<h:commandButton value="#{msgs.loeschen}" action="#{ProzessverwaltungForm.Loeschen}"
							onclick="if (!confirm('#{msgs.sollDerContentWirklichGeloeschtWerden}')) return false" rendered="#{ProzessverwaltungForm.myProzess.id != null}" />
						<h:commandButton value="#{msgs.speichern}" action="#{ProzessverwaltungForm.Speichern}" id="absenden">
							<x:updateActionListener property="#{ProzessverwaltungForm.modusBearbeiten}" value="" />
						</h:commandButton>
					</td>
				</tr>

			</table>
		</h:form>
		<!-- // Box f端r die Bearbeitung der Details -->

		<script src="js/tiny_mce/tiny_mce.js" type="text/javascript"></script>

		<script type="text/javascript">
			tinyMCE
					.init({
						mode : "exact",
						elements : "htmleditorform:myTextArea",
						theme : "advanced",
						width : "100%",
						height : "200px",
						plugins : "safari,pagebreak,style,table,save,advhr,emotions,iespell,inlinepopups,insertdatetime,preview,print,contextmenu,paste,fullscreen,noneditable,visualchars,nonbreaking",
						readonly : 1,

						// Theme options
						theme_advanced_buttons1 : "save,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,formatselect,fontsizeselect",
						theme_advanced_buttons2 : "",
						theme_advanced_buttons3 : "",
						theme_advanced_toolbar_location : "top",
						theme_advanced_toolbar_align : "left",
						theme_advanced_statusbar_location : "bottom",
						theme_advanced_resizing : true
					});
		</script>
	</composite:implementation>

</ui:composition>


