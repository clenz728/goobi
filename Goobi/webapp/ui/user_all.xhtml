<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" template="/ui/template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk">


	<ui:define name="breadcrumb">
		<h:commandLink id="id2" value="#{msgs.startseite}" action="index" />
		<f:verbatim> &#8250;&#8250; </f:verbatim>
		<h:outputText value="#{msgs.benutzerverwaltung}" />
	</ui:define>

	<ui:define name="title">
		<h:outputText value="#{msgs.benutzerverwaltung}" />
	</ui:define>

	<ui:define name="content">

		<h:form rendered="#{LoginForm.maximaleBerechtigung == 1}">
			<h:commandLink id="id5" action="#{BenutzerverwaltungForm.Neu}" immediate="true"
				rendered="#{(LoginForm.maximaleBerechtigung == 1) || (LoginForm.maximaleBerechtigung == 2)}">
				<h:outputText id="id6" value="#{msgs.neuenBenutzerAnlegen}" />
			</h:commandLink>

			<!-- +++++++++++++++++  Anzeigefilter ++++++++++++++++++++++++ -->
			<h:panelGrid id="id8" width="100%" columnClasses="standardTable_Column,standardTable_ColumnRight" rowClasses="standardTable_Row" columns="2"
				style="margin-top: 10px;">
				<h:outputText style="vertical-align: conter;" value="#{msgs.treffer}: #{BenutzerverwaltungForm.paginator.totalResults}" />
				<h:panelGroup id="id9">
					<h:outputText id="id10" value="#{msgs.nurAktiveNutzerZeigen}:" />
					<x:selectBooleanCheckbox id="check1" forceId="true" value="#{BenutzerverwaltungForm.hideInactiveUsers}"
						onchange="document.getElementById('FilterAlle').click()" style="margin-right:40px" />

					<h:outputText id="id11" value="#{msgs.filter}: " />

					<h:inputText id="id12" value="#{BenutzerverwaltungForm.filter}" onkeypress="return submitEnter('FilterAlle',event)" />
					<x:commandButton type="submit" id="FilterAlle" forceId="true" style="display:none" action="#{BenutzerverwaltungForm.FilterAlleStart}" />

					<h:commandLink action="#{BenutzerverwaltungForm.FilterAlleStart}" title="#{msgs.filterAnwenden}" style="margin-left:5px">
						<h:graphicImage id="id13" value="images/buttons/reload.gif" />
					</h:commandLink>
				</h:panelGroup>
			</h:panelGrid>

			<!-- +++++++++++++++++  // Anzeigefilter ++++++++++++++++++++++++ -->

			<!-- Datentabelle -->
			<x:dataTable id="id14" styleClass="standardTable" width="100%" cellspacing="1px" cellpadding="1px" headerClass="standardTable_Header"
				rowClasses="standardTable_Row1,standardTable_Row2"
				columnClasses="standardTable_Column,standardTable_Column,standardTable_Column,standardTable_Column, standardTable_ColumnCentered" var="item"
				value="#{BenutzerverwaltungForm.paginator.list}">

				<h:column id="id15">
					<f:facet name="header">
						<h:outputText id="id16" value="#{msgs.benutzer}" />
					</f:facet>
					<h:outputText id="id17" value="#{item.nachname}, #{item.vorname}" styleClass="#{not item.istAktiv?'text_light':''}" />
				</h:column>

				<h:column id="id18">
					<f:facet name="header">
						<h:outputText id="id19" value="#{msgs.standort}" />
					</f:facet>
					<h:outputText id="id20" value="#{item.standort}" styleClass="#{not item.istAktiv?'text_light':''}" />
				</h:column>

				<h:column id="id21">
					<f:facet name="header">
						<h:outputText id="id22" value="#{msgs.benutzergruppen}" />
					</f:facet>
					<!-- 
					 <h:outputText value="#{item.benutzergruppen}"/>
					 -->
					
					<x:dataList id="id23" var="intern" styleClass="#{not item.istAktiv?'text_light':''}" rendered="#{item.benutzergruppenSize != 0}"
						value="#{item.benutzergruppen}" layout="ordered list" rowCountVar="rowCount" rowIndexVar="rowIndex">
						<h:outputText id="id24" value="#{intern.titel}" />
						<h:outputText id="id25" value="," rendered="#{rowIndex + 1 lt rowCount}" />
					</x:dataList>
				</h:column>

				<h:column id="id26">
					<f:facet name="header">
						<h:outputText id="id27" value="#{msgs.projekte}" />
					</f:facet>
					<x:dataList id="id28" var="intern" styleClass="#{not item.istAktiv?'text_light':''}" rendered="#{item.projekteSize != 0}"
						value="#{item.projekte}" layout="ordered list" rowCountVar="rowCount" rowIndexVar="rowIndex">
						<h:outputText id="id29" value="#{intern.titel}" />
						<h:outputText id="id30" value="," rendered="#{rowIndex + 1 lt rowCount}" />
					</x:dataList>
				</h:column>

				<x:column style="width:80px" rendered="#{(LoginForm.maximaleBerechtigung == 1) || (LoginForm.maximaleBerechtigung == 2)}">
					<f:facet name="header">
						<h:outputText id="id31" value="#{msgs.auswahl}" />
					</f:facet>
					<!-- Bearbeiten-Schaltknopf -->
					<h:commandLink id="id32" action="user_edit" title="#{msgs.benutzerBearbeiten}">
						<h:graphicImage id="id33" value="images/buttons/edit.gif" />
						<x:updateActionListener property="#{BenutzerverwaltungForm.myClass}" value="#{item}" />
					</h:commandLink>

					<!-- LdapKonfiguration schreiben-Schaltknopf -->
					<!-- 										<h:commandLink id="id34" title="#{msgs.ldapKonfigurationSchreiben}"
											action="#{BenutzerverwaltungForm.LdapKonfigurationSchreiben}">
											<h:graphicImage id="id35" value="images/buttons/key3.gif" />
											<x:updateActionListener
												property="#{BenutzerverwaltungForm.myClass}" value="#{item}" />
										</h:commandLink>
-->
					<!-- Benutzerprofil laden-Schaltknopf -->
					<h:commandLink id="id36" title="#{msgs.benutzerprofilLaden}" action="#{LoginForm.EinloggenAls}" style="margin-left:0px">
						<h:graphicImage value="images/buttons/change_user3_20px.gif" />
						<f:param id="id37" name="ID" value="#{item.id}" />
					</h:commandLink>

				</x:column>

			</x:dataTable>


			<table width="100%" border="0">
				<tr valign="top">

					<td align="center">
						<!-- ===================== Datascroller für die Ergebnisse ====================== -->
						<x:aliasBean alias="#{mypage}" value="#{BenutzerverwaltungForm.paginator}">
							<ui:include src="/ui/includes/datascroller.xhtml" />
						</x:aliasBean>
						<!-- ===================== // Datascroller für die Ergebnisse ====================== -->
					</td>
				</tr>
			</table>

		</h:form>

	</ui:define>

</ui:composition>