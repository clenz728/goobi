<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" template="/ui/template/template.html" xmlns:x="http://myfaces.apache.org/tomahawk">

    <ui:define name="breadcrumb">
        <h:commandLink id="id2" value="#{msgs.startseite}" action="index" />
        <f:verbatim> &#8250;&#8250; </f:verbatim>
        <h:outputText id="id3" value="#{msgs.aktiveBenutzer}" />
    </ui:define>

    <ui:define name="title">
        <h:outputText value="#{msgs.aktiveBenutzer}" />
    </ui:define>

    <ui:define name="content">
        <h:form id="activeUser" prependId="false">
            <h:panelGrid id="serverzeit" columns="2" style="font-size:11">
                <h:outputText id="id7" value="#{msgs.aktiveBenutzer}:" />
                <h:outputText id="id8" value="#{SessionForm.aktiveSessions}" />
                <h:outputText id="id9" value="#{msgs.aktuelleZeit}:" />
                <h:outputText id="id10" value="#{SessionForm.aktuelleZeit}" />
            </h:panelGrid>

            <br />

            <x:dataTable id="benutzerliste" styleClass="standardTable" width="100%" cellspacing="1px" cellpadding="1px"
                headerClass="standardTable_Header" rowClasses="standardTable_Row1" var="item" value="#{SessionForm.alleSessions}">

                <h:column id="id11" rendered="#{LoginForm.maximaleBerechtigung > 0}">
                    <f:facet name="header">
                        <h:outputText id="id12" value="#{msgs.benutzer}" />
                    </f:facet>
                    <h:outputText id="id13" value="#{item.user}" />
                </h:column>

                <!--	
			<h:column id="id14">
				<f:facet name="header">
					<h:outputText id="id15" value="#{msgs.id}" />
				</f:facet>
				<h:outputText id="id16" value="#{item.id}" />
			</h:column>
			-->

                <h:column id="id17" rendered="#{LoginForm.maximaleBerechtigung == 1}">
                    <f:facet name="header">
                        <h:outputText id="id18" value="IP" />
                    </f:facet>
                    <h:outputText id="id19" value="#{item.address}" />
                </h:column>

                <h:column id="id20">
                    <f:facet name="header">
                        <h:outputText id="id21" value="Browser" />
                    </f:facet>
                    <h:graphicImage value="images/browser/#{item.browserIcon}" style="float:left;margin-right:4px" />
                    <h:outputText id="id22" value="#{item.browser}" />
                </h:column>

                <h:column id="id23">
                    <f:facet name="header">
                        <h:outputText id="id24" value="#{msgs.aktivSeit}" />
                    </f:facet>
                    <h:outputText id="id25" value="#{item.created}" />
                </h:column>

                <h:column id="id26">
                    <f:facet name="header">
                        <h:outputText id="id27" value="#{msgs.letzterZugriff}" />
                    </f:facet>
                    <h:outputText id="id28" value="#{item.last}" />
                </h:column>

            </x:dataTable>

            <script type="text/javascript">
                setInterval(function() {
                	$('#activeUser').load('currentUsers.xhtml #activeUser');
	                }, 10000);
            </script>
        </h:form>
    </ui:define>

</ui:composition>









