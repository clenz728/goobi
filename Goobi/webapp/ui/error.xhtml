<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/ui/template/template.html"
	xmlns:x="http://myfaces.apache.org/tomahawk">

	<ui:define name="title">
		#{msgs.failure}
	</ui:define>


	<ui:define name="content">
		<script type="text/javascript">
			function show_txt() {
				if (document.getElementById('errorForm:stacktrace').style.display == 'block') {
					document.getElementById('errorForm:stacktrace').style.display = "none";
				} else {
					document.getElementById('errorForm:stacktrace').style.display = "block";
				}
			}
		</script>

		<h:form styleClass="formError" id="errorForm">
			<p>
				#{msgs.generalError}
				<h:outputLink value="#{HelperForm.servletPathAsUrl}">
					<h:outputText value="#{msgs.returnHome}" />
				</h:outputLink>
			</p>
			<br />

			<h4>
				<h:outputText value="#{msgs.details}" />
			</h4>

			<h:outputText value="#{msgs.errorText} " />
			<p style="padding: 10px; border: 1px dashed red;">#{errorDetails}</p>
			<br />

			<h4>
				<h:outputText value="#{msgs.errorReport}" />
			</h4>
			<p>
				<h:outputText value="#{msgs.errorReportDescription}" />
			</p>
			<br />
			<h:button onclick="show_txt(); return false;"
				title="#{msgs.showErrorDetails}" value="#{msgs.showErrorDetails}" />
			<br />
			<br />
			<h:panelGroup id="stacktrace" style="display:none;">
				<div style="padding: 10px; border: 1px dashed red;">
					<h:outputText value="#{errorDetails}" />
					<br />
					<br />
					<x:dataList value="#{stacktrace}" var="e" rowIndexVar="row">

						<h:outputText value="#{e}" rendered="#{row == 0}" />

						<h:outputText value="#{e}" style="position:relative; left: 50px;"
							rendered="#{row != 0 and row lt 15}" />

						<h:panelGroup rendered="#{row lt 15}">
							<br />
						</h:panelGroup>
					</x:dataList>
				</div>

			</h:panelGroup>


		</h:form>

	</ui:define>
</ui:composition>
