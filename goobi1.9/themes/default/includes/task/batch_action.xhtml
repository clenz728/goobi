<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://myfaces.apache.org/sandbox">

	<composite:interface>
	</composite:interface>

	<composite:implementation>
		<h:panelGroup
			rendered="#{AktuelleSchritteForm.batchHelper.currentStep.bearbeitungsbenutzer.id == LoginForm.myBenutzer.id}">


			<!-- ++++++++++++++++     // Import      ++++++++++++++++ -->
			<h:form id="actionform">
				<!-- ++++++++++++++++     Action      ++++++++++++++++ -->
				<table cellpadding="3" cellspacing="0" width="100%"
					class="eingabeBoxen" style="margin-top: 20px">
					<tr>
						<td class="eingabeBoxen_row1"><h:outputText
								value="#{msgs.moeglicheAktionen}" /></td>
					</tr>
					<tr>
						<td class="eingabeBoxen_row2"><h:panelGrid columns="1">

								<x:dataList var="script"
									value="#{AktuelleSchritteForm.batchHelper.scriptnames}"
									layout="unorderedList">
									<h:commandLink id="action3"
										action="#{AktuelleSchritteForm.batchHelper.executeScript}"
										title="#{script}">
										<x:updateActionListener
											property="#{AktuelleSchritteForm.batchHelper.script}"
											value="#{script}" />
										<h:graphicImage value="/newpages/images/buttons/admin4b.gif"
											style="margin-right:3px;vertical-align:middle" />
										<h:outputText value="#{msgs.scriptAusfuehren}: #{script}" />
									</h:commandLink>
								</x:dataList>

								<h:outputText
									style="back-color:blue; color: red; font-weight: bold;"
									rendered="#{AktuelleSchritteForm.batchHelper.currentStep.typExportDMS }"
									value="#{msgs.timeoutWarningDMS}" />

								<h:commandLink id="action9"
									rendered="#{AktuelleSchritteForm.batchHelper.currentStep.typExportDMS}"
									action="#{AktuelleSchritteForm.batchHelper.ExportDMS}"
									title="#{msgs.importDms}">
									<h:graphicImage value="/newpages/images/buttons/dms.png"
										style="margin-right:3px;vertical-align:middle" />
									<h:outputText value="#{msgs.importDms}" />
								</h:commandLink>

								<!-- Schritt zurückgeben an vorherige Station für Korrekturzwecke -->
								<h:commandLink id="correctionbutton">
									<h:graphicImage
										value="/newpages/images/buttons/step_back_20px.gif"
										style="margin-right:3px;vertical-align:middle" />
									<h:outputText
										value="#{msgs.korrekturmeldungAnVorherigeStationSenden}" />
									<s:effectToggle event="click" forId="correction" duration="0.1"
										mode="blind" appendJs="return false;" />
									<f:ajax render="correctionbutton" />
								</h:commandLink>

								<x:div id="correction" style="display:none">
									<h:panelGrid columns="2" style="margin-left:40px;" id="grid3"
										rowClasses="top"
										columnClasses="standardTable_Column,standardTable_ColumnRight">
										<h:outputText value="#{msgs.zurueckZuArbeitsschritt}" />
										<h:selectOneMenu style="width:350px"
											value="#{AktuelleSchritteForm.batchHelper.myProblemStep}">
											<f:selectItems
												value="#{AktuelleSchritteForm.batchHelper.previousStepsForProblemReporting}" />
											<!-- <si:selectItems value="#{AktuelleSchritteForm.batchHelper.previousStepsForProblemReporting}" var="step1"
											itemLabel="#{step1.titelMitBenutzername}" itemValue="#{step1.id}" />-->
										</h:selectOneMenu>
										<h:outputText value="#{msgs.bemerkung}" />
										<h:inputTextarea style="width:350px;height:80px"
											value="#{AktuelleSchritteForm.batchHelper.problemMessage}" />
										<h:outputText value="" />
										<h:panelGroup>
											<h:commandLink id="action130"
												action="#{AktuelleSchritteForm.batchHelper.ReportProblemForSingle}"
												title="#{msgs.korrekturmeldungSenden}"
												onclick="if (!confirm('#{msgs.wirklichAusfuehren}?')) return">
												<h:outputText value="#{msgs.korrekturmeldungSendenSingle}" />
											</h:commandLink>
											<h:outputText value=" | " />
											<h:commandLink id="action131"
												action="#{AktuelleSchritteForm.batchHelper.ReportProblemForAll}"
												title="#{msgs.korrekturmeldungSenden}"
												onclick="if (!confirm('#{msgs.wirklichAusfuehren}?')) return">
												<h:outputText value="#{msgs.korrekturmeldungSendenForAll}" />
											</h:commandLink>
										</h:panelGroup>
									</h:panelGrid>
								</x:div>



								<!-- Schritt weitergeben an nachfolgende Station für KorrekturBehobenZwecke -->
								<h:panelGroup
									rendered="#{AktuelleSchritteForm.batchHelper.currentStep.prioritaet>9}">
									<h:commandLink id="solvebutton">
										<h:graphicImage
											value="/newpages/images/buttons/step_for_20px.gif"
											style="margin-right:3px;vertical-align:middle" />
										<h:outputText
											value="#{msgs.meldungUeberProblemloesungAnNachchfolgendeStationSenden}" />
										<s:effectToggle event="click" duration="0.1" forId="solve"
											mode="blind" appendJs="return false;" />

										<f:ajax render="solvebutton" />
									</h:commandLink>

									<x:div id="solve" style="display:none">
										<h:panelGrid columns="2" style="margin-left:40px;"
											rowClasses="top" id="grid1"
											columnClasses="standardTable_Column,standardTable_ColumnRight">
											<h:outputText value="#{msgs.weiterZuArbeitsschritt}" />
											<h:selectOneMenu style="width:350px" id="select1"
												value="#{AktuelleSchritteForm.batchHelper.mySolutionStep}">
												<f:selectItems
													value="#{AktuelleSchritteForm.batchHelper.nextStepsForProblemSolution}" />

												<!-- <si:selectItems value="#{AktuelleSchritteForm.batchHelper.nextStepsForProblemSolution}" var="step2"
											itemLabel="#{step2.titelMitBenutzername}" itemValue="#{step2.id}" />-->
											</h:selectOneMenu>
											<h:outputText value="#{msgs.bemerkung}" />
											<h:inputTextarea style="width:350px;height:80px" id="input1"
												value="#{AktuelleSchritteForm.batchHelper.solutionMessage}" />
											<h:outputText value="" />
											<h:panelGroup>
												<h:commandLink id="action140"
													action="#{AktuelleSchritteForm.batchHelper.SolveProblemForSingle}"
													title="#{msgs.meldungUeberProblemloesungSenden}"
													onclick="if (!confirm('#{msgs.wirklichAusfuehren}?')) return">
													<h:outputText
														value="#{msgs.meldungUeberProblemloesungSendenSingle}" />
												</h:commandLink>
												<h:outputText value=" | " />
												<h:commandLink id="action141"
													action="#{AktuelleSchritteForm.batchHelper.SolveProblemForAll}"
													title="#{msgs.meldungUeberProblemloesungSenden}"
													onclick="if (!confirm('#{msgs.wirklichAusfuehren}?')) return">
													<h:outputText
														value="#{msgs.meldungUeberProblemloesungSendenForAll}" />
												</h:commandLink>
											</h:panelGroup>
										</h:panelGrid>
									</x:div>

								</h:panelGroup>
-->

						<!-- Bearbeitung abbrechen-Schaltknopf -->
								<h:commandLink id="action11"
									action="#{AktuelleSchritteForm.batchHelper.BatchDurchBenutzerZurueckgeben}"
									title="#{msgs.bearbeitungDiesesSchrittesAbgeben}"
									onclick="if (!confirm('#{msgs.bearbeitungDiesesSchrittesWirklichAbgeben}')) return">
									<h:graphicImage value="/newpages/images/buttons/cancel3.gif"
										style="margin-right:3px;vertical-align:middle" />
									<h:outputText value="#{msgs.bearbeitungDiesesSchrittesAbgeben}" />
								</h:commandLink>
								<!-- Abschliessen-Schaltknopf -->
								<h:commandLink id="action15"
									action="#{AktuelleSchritteForm.batchHelper.BatchDurchBenutzerAbschliessen}"
									title="#{msgs.diesenSchrittAbschliessen}"
									onclick="if (!confirm('#{msgs.diesenSchrittAbschliessen}?')) return">
									<h:graphicImage value="/newpages/images/buttons/ok.gif"
										style="margin-right:3px;vertical-align:middle" />
									<h:outputText value="#{msgs.diesenSchrittAbschliessen}" />
								</h:commandLink>

							</h:panelGrid></td>
					</tr>

				</table>
				<!-- ++++++++++++++++     // Action      ++++++++++++++++ -->
			</h:form>
		</h:panelGroup>
	</composite:implementation>

</ui:composition>


